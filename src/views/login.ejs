<html>
<head>
    <meta http-equiv="content-language" content="tr">
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</head>
<body>
<h1> Oturum Aç</h1>

<form action="/login" method="post" onsubmit="return checkSubmitError();">
    <div id="loginError" class="loginError"><%if(locals.alert)%><%=locals.message%></div>
    <div id="emailForm">
        <input id="email" name="email" type= "text" placeholder= "E-posta veya telefon numarası" onfocusout="emailFocusOut()">
        <div id="emailError" class="inputError" hidden></div>
    </div>
    <div id="passForm">
        <input id="pass" name="pass" type= "password" placeholder="Parola" onfocusout="passFocusOut()">
        <!--    Show hide password button-->
        <div id="passError" class="inputError" hidden ></div>
    </div>
    <button type="submit">Oturum Aç</button>
<!--    Check inputs before submitting-->
</form>
<a href="/signup">Şimdi kaydolun</a>
<a href="/forgotpassword">Şifremi unuttum</a>

<script type="text/javascript">

    function containsLetter(inputtxt)
    {
        var letters = /[^\d.+()]+/;
        if (inputtxt.match(letters)) return true;
        return false;
    }

    function checkEmailError()
    {
        if (document.getElementById("email").value.length == 0)
        {
            document.getElementById("emailError").innerText = "Lütfen geçerli bir telefon numarası veya e‑posta adresi girin.";
            return true;
        }
        else if (document.getElementById("email").value.length < 5 || document.getElementById("email").value.length > 50)
        {
            if (containsLetter(document.getElementById("email").value)) document.getElementById("emailError").innerText = "Lütfen geçerli bir e‑posta adresi girin.";
            else document.getElementById("emailError").innerText = "Lütfen geçerli bir telefon numarası girin.";
            return true;
        }
        else
        {
            document.getElementById("emailError").innerText = "";
            return false;
        }
    }

    function checkPassError()
    {
        if (document.getElementById("pass").value.length < 4 || document.getElementById("pass").value.length > 60)
        {
            document.getElementById("passError").innerText = "Parolanız 4 ila 60 karakter olmalıdır.";
            return true;
        }
        else
        {
            document.getElementById("passError").innerText = "";
            return false;
        }
    }

    function checkSubmitError()
    {
        return checkEmailError() && checkPassError();
    }

    function emailFocusOut()
    {
        if (checkEmailError()) document.getElementById("emailError").hidden = false;
    }

    function passFocusOut()
    {
        if (checkPassError()) document.getElementById("passError").hidden = false;
    }

    document.getElementById("email").oninput = checkEmailError;
    document.getElementById("pass").oninput = checkPassError;

</script>
</body>


</html>