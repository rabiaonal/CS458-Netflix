<html>
    <head>
        <meta http-equiv="content-language" content="tr">
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <title>Netflix</title>
    </head>
    <body>
        <h1><a href="/" id="homebutton">NETFLIX</a> </h1>
        <h2>Sign In</h2>
        <form action="/login" method="post" onsubmit="return checkSubmitError();">
            <div id="loginError" class="loginError"><%if(locals.alert)%><%=locals.message%></div>
            <div id="emailForm">
                <input id="email" name="email" type= "text" placeholder= "E-mail or phone number" onfocusout="emailFocusOut()">
                <div id="emailError" class="inputError" hidden></div>
            </div>
            <div id="passForm">
                <input id="pass" name="pass" type= "password" placeholder="Password" onfocusout="passFocusOut()">
                <button id="passhideBtn" onclick="showHidePass()" type="button">&#128065</button>
                <div id="passError" class="inputError" hidden ></div>
            </div>
            <input id="loginSubmit" type="submit" value="Sign In">
        </form>
        <a id="signupLink" href="/signup">Sign Up Now</a>
        <a id="forgotpasswordLink" href="/forgotpassword">Forgot Password</a>

        <script type="text/javascript">

            function showHidePass()
            {
                pass = document.getElementById("pass");
                pass.setAttribute('type', pass.getAttribute('type') === 'password' ? 'text' : 'password');
            }

            function emailOrPhone(input)
            {
                return /[^\d.+()]+/.test(input);
            }

            function checkEmailError()
            {
                if (document.getElementById("email").value.length == 0)
                {
                    document.getElementById("emailError").innerText = "Please enter valid e-mail or password.";
                    return false;
                }
                else if (document.getElementById("email").value.length < 5 || document.getElementById("email").value.length > 50)
                {
                    if (emailOrPhone(document.getElementById("email").value)) document.getElementById("emailError").innerText = "Please enter a valid e-mail.";
                    else document.getElementById("emailError").innerText = "Please enter a valid phone number.";
                    return false;
                }
                else
                {
                    document.getElementById("emailError").innerText = "";
                    return true;
                }
            }

            function checkPassError()
            {
                if (document.getElementById("pass").value.length < 4 || document.getElementById("pass").value.length > 60)
                {
                    document.getElementById("passError").innerText = "Password should be between 4 and 60 characters long.";
                    return false;
                }
                else
                {
                    document.getElementById("passError").innerText = "";
                    return true;
                }
            }

            function checkSubmitError()
            {
                return checkEmailError() && checkPassError();
            }

            function emailFocusOut()
            {
                if (!checkEmailError()) document.getElementById("emailError").hidden = false;
            }

            function passFocusOut()
            {
                if (!checkPassError()) document.getElementById("passError").hidden = false;
            }

            document.getElementById("email").oninput = checkEmailError;
            document.getElementById("pass").oninput = checkPassError;

        </script>
    </body>
</html>